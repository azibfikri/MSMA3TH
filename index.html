<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Time–Area Method (MSMA) Calculator</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="container">
    <h1>Time–Area Method (MSMA) Calculator</h1>
    <p class="sub">Edit inputs & hit “Calculate”.</p>
  </header>

  <main class="container grid">
    <section class="card">
      <h2>Design Rainfall (IDF)</h2>
      <div class="row">
        <label>Location</label>
        <input id="location" type="text" value="Ibu Pejabat JPS, Kuala Lumpur" />
      </div>
      <div class="row two">
        <div>
          <label>ARI (years)</label>
          <input id="ariYears" type="number" step="1" value="20" />
        </div>
        <div>
          <label>Duration (min)</label>
          <input id="durationMin" type="number" step="1" value="30" />
        </div>
      </div>

      <details>
        <summary>IDF constants (i = K · ARI^x / (A + t)^n)</summary>
        <div class="row four">
          <div>
            <label>K</label>
            <input id="idfK" type="number" step="0.001" value="61.967" />
          </div>
          <div>
            <label>x</label>
            <input id="idfX" type="number" step="0.001" value="0.145" />
          </div>
          <div>
            <label>A (hours)</label>
            <input id="idfA" type="number" step="0.001" value="0.500" />
          </div>
          <div>
            <label>n</label>
            <input id="idfN" type="number" step="0.001" value="0.818" />
          </div>
        </div>
        <p class="hint">t = duration in hours (min ÷ 60)</p>
      </details>
    </section>

    <section class="card">
      <h2>Losses & Areas</h2>
      <div class="row two">
        <div>
          <label>Pervious area (%)</label>
          <input id="perviousPct" type="number" step="1" value="40" />
        </div>
        <div>
          <label>Impervious area (%)</label>
          <input id="imperviousPct" type="number" step="1" value="60" />
        </div>
      </div>

      <div class="row two">
        <div class="box">
          <h3>Pervious</h3>
          <div class="row two">
            <div>
              <label>Initial loss (mm)</label>
              <input id="pervInitLoss" type="number" step="0.1" value="10" />
            </div>
            <div>
              <label>Continuous loss (mm/hr)</label>
              <input id="pervContLoss" type="number" step="0.1" value="0" />
            </div>
          </div>
        </div>
        <div class="box">
          <h3>Impervious</h3>
          <div class="row two">
            <div>
              <label>Initial loss (mm)</label>
              <input id="impervInitLoss" type="number" step="0.1" value="1.5" />
            </div>
            <div>
              <label>Continuous loss (mm/hr)</label>
              <input id="impervContLoss" type="number" step="0.1" value="0" />
            </div>
          </div>
        </div>
      </div>
      <p class="hint">Total area weighting is applied: loss = (perv%×pervLoss + imperv%×impervLoss)/100 per time-step.</p>
    </section>

    <section class="card">
      <h2>Temporal Pattern (30 min)</h2>
      <p class="hint">Normalized fractions for 6×5-min bins (Appendix 2.C5 from your sheet). Must sum ≈ 1.000.</p>
      <div id="patternGrid" class="row six"></div>
    </section>
  </main>

  <section class="container actions">
    <button id="calcBtn">Calculate</button>
    <span id="msg" role="status" aria-live="polite"></span>
  </section>

  <section class="container">
    <div class="card">
      <h2>Results</h2>
      <div class="metrics">
        <div><span class="k">i (mm/hr)</span><span id="outI">–</span></div>
        <div><span class="k">Total depth (mm)</span><span id="outDepth">–</span></div>
      </div>
      <div class="tableWrap">
        <table id="resultTable">
          <thead>
            <tr>
              <th>Time (min)</th>
              <th>Pattern</th>
              <th>Depth (mm)</th>
              <th>Loss (mm)</th>
              <th>Excess (mm)</th>
              <th>Excess (mm/s)</th>
            </tr>
          </thead>
          <tbody></tbody>
          <tfoot>
            <tr>
              <th>Total</th>
              <th id="sumPattern">–</th>
              <th id="sumDepth">–</th>
              <th id="sumLoss">–</th>
              <th id="sumExcess">–</th>
              <th>—</th>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </section>

  <footer class="container footer">
    <small>Built for Render as a single-page static app. No external libs.</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
